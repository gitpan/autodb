<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><HTML><HEAD>	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">	<TITLE></TITLE>	<META NAME="GENERATOR" CONTENT="OpenOffice.org 1.1.1  (Win32)">	<META NAME="AUTHOR" CONTENT="Nathan Goodman">	<META NAME="CREATED" CONTENT="20041204;8294237">	<META NAME="CHANGEDBY" CONTENT="Nathan Goodman">	<META NAME="CHANGED" CONTENT="20041210;9561078">	<STYLE>	<!--		@page { size: 8.5in 11in }		TD P { margin-bottom: 0.08in; font-size: 10pt; line-height: 0.14in }		H1 { margin-top: 0.22in; margin-bottom: 0.08in }		H1.western { font-family: "Times New Roman", serif; font-size: 10pt }		P { margin-bottom: 0.14in; font-size: 10pt; line-height: 0.14in }		H2 { margin-top: 0.14in; margin-bottom: 0.08in; text-decoration: underline }		H2.western { font-size: 10pt; font-weight: medium }		P.code-western { margin-bottom: 0in; font-family: "Courier New", monospace; font-size: 10pt; line-height: 100% }		P.code-cjk { margin-bottom: 0in; font-size: 10pt; line-height: 100% }		P.code-ctl { margin-bottom: 0in; font-size: 10pt; line-height: 100% }		P.row-heading-western { font-size: 10pt; font-weight: bold }		P.row-heading-cjk { font-size: 10pt }		P.row-heading-ctl { font-size: 10pt }		TH P { margin-bottom: 0.08in; font-size: 10pt; line-height: 0.14in }	-->	</STYLE></HEAD><BODY LANG="en-US" DIR="LTR"><H1 CLASS="western">NAME</H1><P STYLE="margin-bottom: 0.2in">Class::AutoDB::Serialize -Serialization engine for Class::AutoDB -- MySQL only for now</P><H1 CLASS="western">SYNOPSIS</H1><P STYLE="margin-bottom: 0.2in">This is a mixin class that enablesobjects to be serialized and stored in a database as independententities, and later fetched one-by-one or in groups. Whether fetchedindividually or in groups, the original shared object structure ispreserved. It's not necessary for the object to also fromClass::AutoClass, although the examples here all do.</P><H2 CLASS="western">Define class that inherits fromClass::AutoDB::Serialize</H2><P STYLE="margin-bottom: 0.2in">Person class with attributes 'name','sex', 'hobbies', and 'friends', where 'friends' is a list ofPersons.</P><PRE>package Person;use Class::AutoClass;use Class::AutoDB::Serialize;@ISA=qw(Class::AutoClass Class::AutoDB::Serialize); @AUTO_ATTRIBUTES=qw(name sex hobbies friends);@OTHER_ATTRIBUTES=qw();%SYNONYMS=();Class::AutoClass::declare(__PACKAGE__);1;</PRE><H2 CLASS="western">Create and store some objects</H2><PRE>use DBI;use Class::AutoDB::Serialize;use Person;my $dbh=DBI-&gt;connect('dbi:mysql:database=ngoodman;host=localhost');Class::AutoDB::Serialize-&gt;dbh($dbh);my $joe=new Person(-name=&gt;'Joe',-sex=&gt;'male',                   -hobbies=&gt;['mountain climbing', 'sailing']);my $mary=new Person(-name=&gt;'Mary',-sex=&gt;'female',                    -hobbies=&gt;['hang gliding']);my $bill=new Person(-name=&gt;'Bill',-sex=&gt;'male',                    -hobbies=&gt;['cooking', 'eating', 'sleeping']);# Set up friends lists$joe-&gt;friends([$mary,$bill]);$mary-&gt;friends([$joe,$bill]);$bill-&gt;friends([$joe,$mary]);# Store the objects$joe-&gt;store;$mary-&gt;store;$bill-&gt;store;# Print their object id's so you can fetch them laterfor my $obj ($joe, $mary, $bill) {  print 'name=', $obj-&gt;name, ' oid=', $obj-&gt;oid, &quot;\n&quot;;}</PRE><H2 CLASS="western">Fetch the objects</H2><P STYLE="margin-bottom: 0.2in">Assume that the oid's are passed ascommand line arguments</P><PRE>my @oids=@ARGV;my $joe=Class::AutoDB::Serialize::fetch($ARGV[0]);my $mary=Class::AutoDB::Serialize::fetch($ARGV[1]);my $bill=Class::AutoDB::Serialize::fetch($ARGV[2]);# Print the objects' attributesfor my $obj ($joe, $mary, $bill) {  print 'oid=', $obj-&gt;oid, &quot;\n&quot;;  print 'name=', $obj-&gt;name, &quot;\n&quot;;  print 'sex=', $obj-&gt;sex, &quot;\n&quot;;  print 'hobbies=', join(', ',@{$obj-&gt;hobbies}), &quot;\n&quot;;  print 'friends=',&quot;\n&quot;;for my $friend (@{$obj-&gt;friends}) {  print ' oid=', $friend-&gt;oid, ', ';  print 'name=', $friend-&gt;name, &quot;\n&quot;;}print &quot;----------\n&quot;;}# Change an attribute in each object to demonstrate # that shared structure is preservedfor my $obj ($joe, $mary, $bill) {  $obj-&gt;name($obj-&gt;name.' Changed');}for my $obj ($joe, $mary, $bill) {  print 'oid=', $obj-&gt;oid, &quot;\n&quot;;  print 'changed name=', $obj-&gt;name, &quot;\n&quot;;  print 'friends=',&quot;\n&quot;;  for my $friend (@{$obj-&gt;friends}) {    print ' oid=', $friend-&gt;oid, ', ';    print 'changed name=', $friend-&gt;name, &quot;\n&quot;;  }  print &quot;----------\n&quot;;}</PRE><H1 CLASS="western">DESCRIPTION</H1><P STYLE="margin-bottom: 0.2in">This is a mixin class that implementsthe serialization and data storage engine for Class::AutoDB. Objectsthat inherit from this class can be serialized and stored in adatabase as independent entities. This only works for objectsimplemented as HASHes in the usual Perl way. </P><P STYLE="margin-bottom: 0.2in"><FONT FACE="Times New Roman, serif">Whatdistinguishes Class::AutoDB::Serialize from the man</FONT>y otherexcellent Perl serialization packages (eg, <A HREF="data::Dumper">Data::Dumper</A>,Storable, YAML) is that we serialize objects as independent entitiesexisting within a large network, rather than serializing entirenetworks as a whole. When an object is being serialized, other&ldquo;auto-serializable&rdquo; objects that are encountered are notserialized then and there; instead a placeholder object called an Oid(short for <I>object identifier</I>) is emitted into theserialization stream. When the object is later fetched, theplaceholders are not immediately fetched; instead each placeholder isfetched transparently when the program invokes a method on it (thisis accomplished via an AUTOLOAD mechanism).</P><P STYLE="margin-bottom: 0.2in">The purpose of all this is to make iteasy for Perl programs to operate on large databases of objects.Objects can be created, stored, and later fetched. If the objectpoints to other objects, they will be fetched when needed. Newobjects can be created, connected to the network of existing objects,and stored. </P><a name="bugs_and_wishlist"></a><H1 CLASS="western">BUGS and WISH-LIST</H1><TABLE WIDTH=100% BORDER=1 CELLPADDING=4 CELLSPACING=3>	<COL WIDTH=37*>	<COL WIDTH=130*>	<COL WIDTH=89*>	<THEAD>		<TR VALIGN=TOP>			<TH WIDTH=14%>				<P><FONT SIZE=2>Name</FONT></P>			</TH>			<TH WIDTH=51%>				<P><FONT SIZE=2>Description</FONT></P>			</TH>			<TH WIDTH=35%>				<P><FONT SIZE=2>Priority/When</FONT></P>			</TH>		</TR>	</THEAD>	<TBODY>		<TR>			<TD WIDTH=14%>				<P CLASS="row-heading-western">Auto-store</P>			</TD>			<TD WIDTH=51%>				<P>Automatically store objects when they go out of scope</P>			</TD>			<TD WIDTH=35%>				<P>Essential. This release</P>			</TD>		</TR>		<TR>			<TD WIDTH=14%>				<P CLASS="row-heading-western">Selectable persistence</P>			</TD>			<TD WIDTH=51%>				<P>Make it possible to speciify on a per object basis whether the				object should be persistent. This would simplify the Registry				code, for example, by allowing separate persistent vs. transient				registries</P>			</TD>			<TD WIDTH=35%>				<P>This release or next</P>			</TD>		</TR>		<TR>			<TD WIDTH=14%>				<P CLASS="row-heading-western">transients</P>			</TD>			<TD WIDTH=51%>				<P>Allow specification of attributes that are not stored, and				obviously don't store them</P>			</TD>			<TD WIDTH=35%>				<P>Important. This release.</P>			</TD>		</TR>		<TR>			<TD WIDTH=14%>				<P CLASS="row-heading-western">auto-gets</P>			</TD>			<TD WIDTH=51%>				<P>Allow specification of attributes that are automatically				fetched when this object is fetched, and obviously get them</P>			</TD>			<TD WIDTH=35%>				<P>(Probably part of AutoDB, not this class). Wish-list</P>			</TD>		</TR>		<TR>			<TD WIDTH=14%>				<P CLASS="row-heading-western">Database object</P>			</TD>			<TD WIDTH=51%>				<P>Provide usual database object.</P>			</TD>			<TD WIDTH=35%>				<P>Important. This release. (May be part of AutoDB, not this				class)</P>			</TD>		</TR>		<TR>			<TD WIDTH=14%>				<P CLASS="row-heading-western">Supported DBMSs</P>			</TD>			<TD WIDTH=51%>				<P>Only MySQL now.</P>			</TD>			<TD WIDTH=35%>				<P>Postgres desirable. This release or next.</P>				<P>Other DBMSs. Someone else's job!</P>			</TD>		</TR>		<TR>			<TD WIDTH=14%>				<P CLASS="row-heading-western">Fetch Oid</P>			</TD>			<TD WIDTH=51%>				<P>Allow Oid object as arg to Serialize::fetch</P>			</TD>			<TD WIDTH=35%>				<P>Wish-list</P>			</TD>		</TR>		<TR>			<TD WIDTH=14%>				<P CLASS="row-heading-western">Re-fetch</P>			</TD>			<TD WIDTH=51%>				<P>Allow program to re-fetch (refresh might be a better word)				object from database</P>			</TD>			<TD WIDTH=35%>				<P>Dunno...</P>			</TD>		</TR>	</TBODY></TABLE><a name="methods_and_functions"></a><H1 CLASS="western">METHODS and FUNCTIONS - Initialization</H1><TABLE WIDTH=100% BORDER=1 CELLPADDING=4 CELLSPACING=3>	<COL WIDTH=38*>	<COL WIDTH=61*>	<COL WIDTH=157*>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Title</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P><FONT FACE="Courier New, monospace">dbh</FONT></P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Usage</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P STYLE="margin-bottom: 0in"><FONT FACE="Courier New, monospace">my			$dbh=DBI-&gt;connect(...); </FONT>			</P>			<P><FONT FACE="Courier New, monospace">Class::AutoDB::Serialize-&gt;dbh($dbh);</FONT></P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Function</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Set database handle for all database operations.</P>			<P>With no argument, returns current database handle (mostly for			internal use)</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Args</P>		</TD>		<TD WIDTH=24% VALIGN=TOP>			<P CLASS="code-western">$dbh</P>		</TD>		<TD WIDTH=61% VALIGN=TOP>			<P>Database handle from DBI::connect</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Returns</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Current database handle</P>		</TD>	</TR></TABLE><H1 CLASS="western">METHODS and FUNCTIONS &ndash; store and fetch</H1><TABLE WIDTH=100% BORDER=1 CELLPADDING=4 CELLSPACING=3>	<COL WIDTH=38*>	<COL WIDTH=61*>	<COL WIDTH=157*>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Title</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE>store</PRE>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Usage</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE>my $joe=new Person(-name=&gt;'Joe',...); $joe-&gt;store;</PRE>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Function</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Serialize and store object in database.</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Args</P>		</TD>		<TD WIDTH=24% VALIGN=TOP>			<PRE>none</PRE>		</TD>		<TD WIDTH=61% VALIGN=TOP>			<P><BR>			</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Returns</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Object</P>		</TD>	</TR></TABLE><P STYLE="margin-bottom: 0.2in"><BR><BR></P><TABLE WIDTH=100% BORDER=1 CELLPADDING=4 CELLSPACING=3>	<COL WIDTH=38*>	<COL WIDTH=61*>	<COL WIDTH=157*>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Title</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE>fetch</PRE>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Usage</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE>my $oid=...; # get oid somehowmy $joe=Class::AutoDB::Serialize-&gt;fetch($oid);</PRE>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Function</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Fetch object from database.</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Args</P>		</TD>		<TD WIDTH=24% VALIGN=TOP>			<PRE>$oid</PRE>		</TD>		<TD WIDTH=61% VALIGN=TOP>			<P>Numeric object identifier. Not Oid object</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Returns</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Object or undef if object not found</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Notes</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Can be called as			function,<FONT FACE="Courier New, monospace">Class::AutoDB::Serialize::fetch($oid)</FONT><FONT FACE="Times New Roman, serif">,			or object method, <FONT FACE="Courier New, monospace">$joe-&gt;fetch($oid)</FONT>,			also.</FONT></P>		</TD>	</TR></TABLE><H1 CLASS="western">METHODS and FUNCTIONS &ndash; manage objectidentifiers (mostly internal use)</H1><TABLE WIDTH=100% BORDER=1 CELLPADDING=4 CELLSPACING=3>	<COL WIDTH=38*>	<COL WIDTH=61*>	<COL WIDTH=157*>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Title</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE>oid2obj</PRE>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Usage</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE>my $obj=Class::AutoDB::Serialize-&gt;oid2obj($oid);Class::AutoDB::Serialize-&gt;oid2obj($oid,$obj);</PRE>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Function</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Get or set actual object associated with numeric object			identifier</P>		</TD>	</TR>	<TR>		<TD ROWSPAN=2 WIDTH=15%>			<P CLASS="row-heading-western">Args</P>		</TD>		<TD WIDTH=24% VALIGN=TOP>			<PRE>$oid</PRE>		</TD>		<TD WIDTH=61% VALIGN=TOP>			<P>Numeric object identifier. Not Oid object</P>		</TD>	</TR>	<TR VALIGN=TOP>		<TD WIDTH=24%>			<PRE>$obj</PRE>		</TD>		<TD WIDTH=61%>			<P>Object. Should inherit from Class::AutoDB::Serialize</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Returns</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Object or undef if no object with given oid exists in memory.			The object may be a real object or a placeholder			(<FONT FACE="Courier New, monospace">Class::AutoDB::Oid</FONT>).</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Notes</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Can be called as function <FONT FACE="Times New Roman, serif">or			object method also.</FONT></P>		</TD>	</TR></TABLE><P STYLE="margin-bottom: 0.2in"><BR><BR></P><TABLE WIDTH=100% BORDER=1 CELLPADDING=4 CELLSPACING=3>	<COL WIDTH=38*>	<COL WIDTH=61*>	<COL WIDTH=157*>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Title</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE>obj2oid,oid</PRE>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Usage</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE>my $oid=Class::AutoDB::Serialize-&gt;obj2oid($obj);Class::AutoDB::Serialize-&gt;obj2oid($obj,$oid);my $oid=$obj-&gt;oid;$obj-&gt;oid($obj)</PRE>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Function</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Get or set numeric object identifier for object.</P>		</TD>	</TR>	<TR>		<TD ROWSPAN=2 WIDTH=15%>			<P CLASS="row-heading-western">Args</P>		</TD>		<TD WIDTH=24%>			<PRE>$obj</PRE>		</TD>		<TD WIDTH=61%>			<P>Any object. Should inherit from Class::AutoDB::Serialize for			this to be very useful.</P>		</TD>	</TR>	<TR>		<TD WIDTH=24%>			<P CLASS="code-western">$oid</P>		</TD>		<TD WIDTH=61%>			<P>Numeric object identifier. Not Oid object</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Returns</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Numeric object identifier (not Oid object) or undef if object			has no oid.</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Notes</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P CLASS="code-western"><FONT FACE="Times New Roman, serif"><FONT FACE="Courier New, monospace">obj2oid</FONT>			and <FONT FACE="Courier New, monospace">oid</FONT> are exact			synonyms. The former is more natural when called as a class			method; the latter as an object method. Each can be called as an			object method, class method, or function.</FONT></P>		</TD>	</TR></TABLE><P STYLE="margin-bottom: 0.2in; line-height: 100%"><BR><BR></P></BODY></HTML>