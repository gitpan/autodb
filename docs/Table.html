<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><HTML><HEAD>	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">	<TITLE></TITLE>	<META NAME="GENERATOR" CONTENT="OpenOffice.org 1.1.1  (Win32)">	<META NAME="AUTHOR" CONTENT="Nathan Goodman">	<META NAME="CREATED" CONTENT="20041204;8294237">	<META NAME="CHANGEDBY" CONTENT="Nathan Goodman">	<META NAME="CHANGED" CONTENT="20041225;10501990">	<STYLE>	<!--		@page { size: 8.5in 11in }		TD P { margin-bottom: 0.08in; font-size: 10pt; line-height: 0.14in }		H1 { margin-top: 0.22in; margin-bottom: 0.08in }		H1.western { font-family: "Times New Roman", serif; font-size: 10pt }		P { margin-bottom: 0.14in; font-size: 10pt; line-height: 0.14in }		P.code-western { margin-bottom: 0in; font-family: "Courier New", monospace; font-size: 10pt; line-height: 100% }		P.code-cjk { margin-bottom: 0in; font-size: 10pt; line-height: 100% }		P.code-ctl { margin-bottom: 0in; font-size: 10pt; line-height: 100% }		P.row-heading-western { font-size: 10pt; font-weight: bold }		P.row-heading-cjk { font-size: 10pt }		P.row-heading-ctl { font-size: 10pt }		TH P { margin-bottom: 0.08in; font-size: 10pt; line-height: 0.14in }	-->	</STYLE></HEAD><BODY LANG="en-US" DIR="LTR"><H1 CLASS="western">NAME</H1><P STYLE="margin-bottom: 0.2in">Class::AutoDB::Table - Schemainformation for one table</P><H1 CLASS="western">SYNOPSIS</H1><P STYLE="margin-bottom: 0.2in">This is a helper class forClass::AutoDB::Registry which represents the schema information forone table.</P><PRE>use Class::AutoDB::Table;my $table=new Class::AutoDB::Table  (-name=&gt;'Person',   -keys{name=&gt;'string',dob=&gt;'integer',grade_avg=&gt;'float',friend=&gt;'object'});my $name=$table-&gt;name; my $keys=$table-&gt;keys;           # hash of key=&gt;type pairsmy @sql=$table-&gt;schema;          # SQL statements to create tablemy @sql=$table-&gt;schema('create');# same as abovemy @sql=$table-&gt;schema('drop');  # SQL statements to drop tablemy @sql=$table-&gt;schema('alter'); # SQL statements to add columns                                  #   of this table to another</PRE><H1 CLASS="western">DESCRIPTION</H1><P STYLE="margin-bottom: 0.2in">This class represents schemainformation for one table. This class is fed a HASH of key=&gt;typepairs. Each turns into one column of the table. In addition, thetable has an 'object' column which is a foreign key pointing to theAutoDB object table and which is the primary key here. Indexes aredefined on all keys. This class just creates SQL; <I>it does not talkto the database</I>.</P><P STYLE="margin-bottom: 0.2in">At present, only our special datatypes ('string', 'integer', 'float', 'object') are supported. Thesecan be abbreviated. These are translated into MySQL types as follows:</P><TABLE WIDTH=100% BORDER=0 CELLPADDING=8 CELLSPACING=0>	<COL WIDTH=53*>	<COL WIDTH=203*>	<THEAD>		<TR>			<TD WIDTH=21%>				<P><B>AutoDB type</B></P>			</TD>			<TD WIDTH=79%>				<P><B>MySQL type</B></P>			</TD>		</TR>	</THEAD>	<TBODY>		<TR>			<TD WIDTH=21%>				<P>string</P>			</TD>			<TD WIDTH=79%>				<P>longtext</P>			</TD>		</TR>		<TR>			<TD WIDTH=21%>				<P>integer</P>			</TD>			<TD WIDTH=79%>				<P>int</P>			</TD>		</TR>		<TR>			<TD WIDTH=21%>				<P>float</P>			</TD>			<TD WIDTH=79%>				<P>double</P>			</TD>		</TR>		<TR>			<TD WIDTH=21%>				<P>object</P>			</TD>			<TD WIDTH=79%>				<P>int</P>			</TD>		</TR>	</TBODY></TABLE><a name="bugs_and_wishlist"></a><H1 CLASS="western">BUGS and WISH-LIST</H1><TABLE WIDTH=100% BORDER=1 CELLPADDING=4 CELLSPACING=3>	<COL WIDTH=37*>	<COL WIDTH=130*>	<COL WIDTH=89*>	<THEAD>		<TR VALIGN=TOP>			<TH WIDTH=14%>				<P><FONT SIZE=2>Name</FONT></P>			</TH>			<TH WIDTH=51%>				<P><FONT SIZE=2>Description</FONT></P>			</TH>			<TH WIDTH=35%>				<P><FONT SIZE=2>Priority/When</FONT></P>			</TH>		</TR>	</THEAD>	<TBODY>		<TR>			<TD WIDTH=14%>				<P CLASS="row-heading-western">General alter</P>			</TD>			<TD WIDTH=51%>				<P CLASS="code-western"><FONT FACE="Times New Roman, serif">The				'alter' function generates SQL to add all columns of the table to				an empty table of the same name. This is what's needed by the				Collection::merge code. Doing it right means comparing two tables				and producing SQL to transform one into the other.</FONT></P>			</TD>			<TD WIDTH=35%>				<P>Wish-list</P>			</TD>		</TR>	</TBODY></TABLE><a name="methods_and_functions"></a><H1 CLASS="western">METHODS and FUNCTIONS - Initialization</H1><TABLE WIDTH=100% BORDER=1 CELLPADDING=4 CELLSPACING=3>	<COL WIDTH=38*>	<COL WIDTH=61*>	<COL WIDTH=157*>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Title</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P><FONT FACE="Courier New, monospace">new</FONT></P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Usage</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE>my $table=new Class::AutoDB::Table  (-name=&gt;'Person',   -keys=&gt;{name=&gt;'string',dob=&gt;'integer'})</PRE>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Function</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Constructor.</P>		</TD>	</TR>	<TR>		<TD ROWSPAN=2 WIDTH=15%>			<P CLASS="row-heading-western">Args</P>		</TD>		<TD WIDTH=24%>			<P CLASS="code-western">-name</P>		</TD>		<TD WIDTH=61%>			<P>Table name</P>		</TD>	</TR>	<TR>		<TD WIDTH=24%>			<P CLASS="code-western">-keys</P>		</TD>		<TD WIDTH=61%>			<P>Search keys. This is a HASH of <FONT FACE="Courier New, monospace">key=&gt;type</FONT>			pairs. Each key becomes a column of the table. The type must be a			legal AutoDB (<I>not MySQL!</I>) base type ('string', 'integer',			'float', 'object').</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Returns</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Table object</P>		</TD>	</TR></TABLE><H1 CLASS="western">METHODS and FUNCTIONS &ndash; Simple Attributes</H1><P>These are methods for getting and setting the values of simpleattributes. Methods have the same name as the attribute. Some ofthese should be read-only (more precisely, should only be written bycode internal to the object), but this is not enforced. </P><P>To get the value of attribute <FONT FACE="Courier New, monospace">xxx</FONT>,just say </P><P STYLE="margin-left: 0.29in"><FONT FACE="Courier New, monospace">$xxx=$object-&gt;xxx;</FONT></P><P>To set it, say</P><P STYLE="margin-left: 0.29in"><FONT FACE="Courier New, monospace">$object-&gt;xxx($new_value);</FONT></P><P>To clear it, say </P><P STYLE="margin-left: 0.31in"><FONT FACE="Courier New, monospace">$object-&gt;xxx(undef);</FONT></P><TABLE WIDTH=100% BORDER=1 CELLPADDING=4 CELLSPACING=3>	<COL WIDTH=39*>	<COL WIDTH=217*>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Attribute</P>		</TD>		<TD WIDTH=85% VALIGN=TOP>			<PRE><FONT FACE="Courier New, monospace">name</FONT></PRE>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Function</P>		</TD>		<TD WIDTH=85% VALIGN=TOP>			<P>Table name</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Access</P>		</TD>		<TD WIDTH=85% VALIGN=TOP>			<P>Read-only</P>		</TD>	</TR></TABLE><H1 CLASS="western">METHODS and FUNCTIONS &ndash; Other</H1><TABLE WIDTH=100% BORDER=1 CELLPADDING=4 CELLSPACING=3>	<COL WIDTH=38*>	<COL WIDTH=63*>	<COL WIDTH=155*>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Title</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE>keys</PRE>		</TD>	</TR>	<TR>		<TD ROWSPAN=2 WIDTH=15%>			<P CLASS="row-heading-western">Usage</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P CLASS="code-western">my %keys=$table-&gt;keys</P>		</TD>	</TR>	<TR>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE>my $keys=$table-&gt;keys</PRE>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Function</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Returns <FONT FACE="Courier New, monospace">key=&gt;type</FONT>			pairs for keys registered for this table</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Args</P>		</TD>		<TD WIDTH=25% VALIGN=TOP>			<PRE>none</PRE>		</TD>		<TD WIDTH=61% VALIGN=TOP>			<P><BR>			</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Returns</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>HASH or HASH ref depending on context</P>		</TD>	</TR></TABLE><P><BR><BR></P><TABLE WIDTH=100% BORDER=1 CELLPADDING=4 CELLSPACING=3>	<COL WIDTH=38*>	<COL WIDTH=63*>	<COL WIDTH=155*>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Title</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE><FONT FACE="Courier New, monospace">put</FONT></PRE>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Usage</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P CLASS="code-western">$collection-&gt;put($key_values)</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Function</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Returns SQL statements needed to store the give key=&gt;value			pairs in the table. Does not touch the database</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Args</P>		</TD>		<TD WIDTH=25%>			<PRE>$key_values</PRE>		</TD>		<TD WIDTH=61% VALIGN=TOP>			<P>HASH ref of key=value pairs to be stored.  The HASH may contain			more keys than are defined for this table, and may omit some keys			defined for this table.</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Returns</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>ARRAY or ARRAY ref depending on context. Each element of the			results is a single SQL statement as a string.</P>		</TD>	</TR></TABLE><P><BR><BR></P><TABLE WIDTH=100% BORDER=1 CELLPADDING=4 CELLSPACING=3>	<COL WIDTH=38*>	<COL WIDTH=61*>	<COL WIDTH=157*>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Title</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE>schema</PRE>		</TD>	</TR>	<TR>		<TD ROWSPAN=4 WIDTH=15%>			<P CLASS="row-heading-western">Usage</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE>my @sql=$table-&gt;schema</PRE>		</TD>	</TR>	<TR>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE>my $sql=$table-&gt;schema</PRE>		</TD>	</TR>	<TR>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE>my @sql=$table-&gt;schema($what)</PRE>		</TD>	</TR>	<TR>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE>my $sql=$table-&gt;schema($what)</PRE>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Function</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Returns SQL statements needed to create, drop, or alter the			table. Does not touch the database</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Args</P>		</TD>		<TD WIDTH=24%>			<PRE>$what</PRE>		</TD>		<TD WIDTH=61%>			<P>String indicating what schema operation is desired:</P>			<P>create &ndash; default<BR>drop<BR>alter</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Returns</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>ARRAY or ARRAY ref depending on context. Each element of the			results is a single SQL statement as a string</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Notes</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P CLASS="code-western" STYLE="margin-bottom: 0.2in"><FONT FACE="Times New Roman, serif"><B>Deprecated.			 Use <FONT FACE="Courier New, monospace">create</FONT>, <FONT FACE="Courier New, monospace">drop</FONT>,			<FONT FACE="Courier New, monospace">alter</FONT> instead.</B></FONT></P>			<P CLASS="code-western"><FONT FACE="Times New Roman, serif">The			'alter' function is a bit of a hack: it generates SQL to add all			columns of the table to an empty table of the same name. This is			what's needed by the Collection::merge code. The alternative of			doing it right: comparing two tables and producing SQL to			transform one into the other is overkill for what we need now.</FONT></P>		</TD>	</TR></TABLE><P><BR><BR></P><TABLE WIDTH=100% BORDER=1 CELLPADDING=4 CELLSPACING=3>	<COL WIDTH=38*>	<COL WIDTH=63*>	<COL WIDTH=155*>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Title</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE><FONT FACE="Courier New, monospace">create</FONT></PRE>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Usage</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P CLASS="code-western">$table-&gt;create</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Function</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Returns SQL statements needed to create the tables that			implement the table. Does not touch the database</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Args</P>		</TD>		<TD WIDTH=25%>			<PRE>none</PRE>		</TD>		<TD WIDTH=61% VALIGN=TOP>			<P><BR>			</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Returns</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>ARRAY or ARRAY ref depending on context. Each element of the			results is a single SQL statement as a string.</P>		</TD>	</TR></TABLE><P><BR><BR></P><TABLE WIDTH=100% BORDER=1 CELLPADDING=4 CELLSPACING=3>	<COL WIDTH=38*>	<COL WIDTH=63*>	<COL WIDTH=155*>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Title</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE><FONT FACE="Courier New, monospace">drop</FONT></PRE>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Usage</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P CLASS="code-western">$table-&gt;drop</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Function</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Returns SQL statements needed to drop the tables that implement			the table. Does not touch the database</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Args</P>		</TD>		<TD WIDTH=25%>			<PRE>none</PRE>		</TD>		<TD WIDTH=61% VALIGN=TOP>			<P><BR>			</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Returns</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>ARRAY or ARRAY ref depending on context. Each element of the			results is a single SQL statement as a string.</P>		</TD>	</TR></TABLE><P><BR><BR></P><TABLE WIDTH=100% BORDER=1 CELLPADDING=4 CELLSPACING=3>	<COL WIDTH=38*>	<COL WIDTH=63*>	<COL WIDTH=155*>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Title</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<PRE><FONT FACE="Courier New, monospace">alter</FONT></PRE>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Usage</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P CLASS="code-western">$table-&gt;alter</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Function</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>Returns SQL statements needed to alter the tables that			implement the table. Does not touch the database</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Args</P>		</TD>		<TD WIDTH=25%>			<PRE>none</PRE>		</TD>		<TD WIDTH=61% VALIGN=TOP>			<P><BR>			</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Returns</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P>ARRAY or ARRAY ref depending on context. Each element of the			results is a single SQL statement as a string.</P>		</TD>	</TR>	<TR>		<TD WIDTH=15%>			<P CLASS="row-heading-western">Notes</P>		</TD>		<TD COLSPAN=2 WIDTH=85% VALIGN=TOP>			<P CLASS="code-western" STYLE="margin-bottom: 0.2in"><FONT FACE="Times New Roman, serif">Valid			for BaseTables only.</FONT></P>			<P CLASS="code-western"><FONT FACE="Times New Roman, serif">The			'alter' function is a bit of a hack: it generates SQL to add all			columns of the table to an empty table of the same name. This is			what's needed by the Collection::merge code. The alternative of			doing it right: comparing two tables and producing SQL to			transform one into the other is overkill for what we need now.</FONT></P>		</TD>	</TR></TABLE><H1 CLASS="western" STYLE="margin-top: 0in; margin-bottom: 0in; line-height: 100%"><BR></H1></BODY></HTML>